//! Get le byte representation of `atan(2^{-i})` where `i in 0..=128` in fixed number type
//!
//! - `fixed_rads` - in radians in `U1F127`  
//!   values generated by `atan_2p_rad.fish` using WolframAlpha
//! - `fixed_degs` - in degrees in `U6F122`  
//!   values generated by `atan_2p_deg.fish` using WolframAlpha
//!
//! Its just printed in console -> copy it.
#![recursion_limit = "256"]
use fixed_macro::types::*;

macro_rules! fixed_rad_bytes {
    ($n:expr) => {
        println!("U1F127::from_le_bytes({:?}),", U1F127!($n).to_le_bytes())
    };
}

macro_rules! fixed_rads {
    // The pattern for a single
    ($n:expr) => {{
        {
            fixed_rad_bytes!($n)
        }
    }};

    // Decompose multiple recursively
    ($n:expr,$($ns:expr),+) => {{
        fixed_rad_bytes! { $n };
        fixed_rads! { $($ns), + };
    }};
}

macro_rules! fixed_deg_bytes {
    ($n:expr) => {
        println!("U6F122::from_le_bytes({:?}),", U6F122!($n).to_le_bytes())
    };
}

macro_rules! fixed_degs {
    // The pattern for a single
    ($n:expr) => {{
        {
            fixed_deg_bytes!($n)
        }
    }};

    // Decompose multiple recursively
    ($n:expr,$($ns:expr),+) => {{
        fixed_deg_bytes! { $n };
        fixed_degs! { $($ns), + };
    }};
}

// WolframAlpha: 180/PI
// 57.295779513082320876798154814105170332405472466564321549160243861...

// const FRAC_180_PI: U6F122 = U6F122::from_le_bytes([
//     215, 87, 210, 64, 127, 83, 151, 10, 195, 189, 15, 30, 211, 224, 46, 229,
// ]);

// const FRAC_PI_180: U0F128 = U0F128::from_le_bytes([
//     39, 46, 164, 116, 179, 47, 118, 112, 69, 78, 167, 148, 168, 209, 119, 4,
// ]);

// // this will overflow with Val=U6F122 and r > 1.*
// fn rad_to_deg<Val>(r: Val) -> Val
// where
//     Val: Fixed,
// {
//     // 3.14.. rad = pi rad = 180
//     // 1 rad = 180 / pi
//     r * Val::from_fixed(FRAC_180_PI)
// }

// // this should never overflow
// fn deg_to_rad<Val>(d: Val) -> Val
// where
//     Val: Fixed,
// {
//     // 1 deg = pi / 180
//     d * Val::from_fixed(FRAC_PI_180)
// }

fn main() {
    println!("Rads\n");
    // WolframAlpha helped us get these numbers
    fixed_rads!(
        0.7853981633974483096156608458198757210492923498437764552437361480,
        0.4636476090008061162142562314612144020285370542861202638109330887,
        0.2449786631268641541720824812112758109141440983811840671273759146,
        0.1243549945467614350313548491638710255731701917698040899151141191,
        0.0624188099959573484739791129855051136062738877974991946075278168,
        0.0312398334302682762537117448924909770324956637254000402553155862,
        0.0156237286204768308028015212565703189111141398009054178814105073,
        0.0078123410601011112964633918421992816212228117250147235574539022,
        0.0039062301319669718276286653114243871403574901152028562152130951,
        0.0019531225164788186851214826250767139316107467772335103390575339,
        0.0009765621895593194304034301997172908516341970158100875900490072,
        0.0004882812111948982754692396256448486661923611331350030371094033,
        0.0002441406201493617640167229432596599862124177909706176118079004,
        0.0001220703118936702042390586461179563009308294090157874984519398,
        0.0000610351561742087750216625691738291537851435368333461793376711,
        0.0000305175781155260968618259534385360197509496751194378375310211,
        0.0000152587890613157621072319358126978851374292381445758748462411,
        7.6293945311019702633884823401050905863507439184680771577638e-6,
        3.8146972656064962829230756163729937228052573039688663101874e-6,
        1.9073486328101870353653693059172441687143421654501533666700e-6,
        9.5367431640596087942067068992311239001963412449879016013361e-7,
        4.7683715820308885992758382144924707587049404378664196740053e-7,
        2.3841857910155798249094797721893269783096898769063155913766e-7,
        1.1920928955078068531136849713792211264596758766458673557673e-7,
        5.9604644775390554413921062141788874250030195782366297314294e-8,
        2.9802322387695303676740132767709503349043907067445107249258e-8,
        1.4901161193847655147092516595963247108248930025964720012170e-8,
        7.4505805969238279871365645744953921132066925545665870075947e-9,
        3.7252902984619140452670705718119235836719483287370405242319e-9,
        1.8626451492309570290958838214764904345065282835738863513491e-9,
        9.3132257461547851535573547768456130389292649614929067394376e-10,
        4.6566128730773925777884193471057016297347863891561617421323e-10,
        2.3283064365386962890204274183882127037127429320498186052548e-10,
        1.1641532182693481445259909272985265879639645738001429002658e-10,
        5.8207660913467407226496761591231582349549156257795272423976e-11,
        2.9103830456733703613273032698903947793693632003639830495829e-11,
        1.4551915228366851806639597837362993474211703608936710732067e-11,
        7.2759576141834259033201841046703741842764629388821429640111e-12,
        3.6379788070917129516601402005837967730345578669779258118296e-12,
        1.8189894035458564758300761188229745966293197333602925371452e-12,
        9.0949470177292823791503881172787182457866496666966318622647e-13,
        4.5474735088646411895751949990348397807233312083369623012466e-13,
        2.2737367544323205947875976170668549725904164010421166413578e-13,
        1.1368683772161602973937988232271068715738020501302644662229e-13,
        5.6843418860808014869689941345026335894672525626628305471702e-14,
        2.8421709430404007434844970695472041986834065703328538172835e-14,
        1.4210854715202003717422485350605880248354258212916067271256e-14,
        7.1054273576010018587112426756616725310442822766145084088962e-15,
        3.5527136788005009293556213378756778163805352845768135511116e-15,
        1.7763568394002504646778106689434441020475669105721016938889e-15,
        8.8817841970012523233890533447242270025594586382151271173611e-16,
        4.4408920985006261616945266723629893128199323297768908896701e-16,
        2.2204460492503130808472633361816041328524915412221113612087e-16,
        1.1102230246251565404236316680908157509815614426527639201510e-16,
        5.5511151231257827021181583404540958606019518033159549001888e-17,
        2.7755575615628913510590791702270500685127439754144943625236e-17,
        1.3877787807814456755295395851135253015328429969268117953154e-17,
        6.9388939039072283776476979255676268417598037461585147441443e-18,
        3.4694469519536141888238489627838134626418504682698143430180e-18,
        1.7347234759768070944119244813919067365411688085337267928772e-18,
        8.6736173798840354720596224069595336892311485106671584910965e-19,
        4.3368086899420177360298112034797668454312373138333948113870e-19,
        2.1684043449710088680149056017398834228175765392291743514233e-19,
        1.0842021724855044340074528008699417114215330049036467939279e-19,
        5.4210108624275221700372640043497085571235959436295584924099e-20,
        2.7105054312137610850186320021748542785637893367036948115512e-20,
        1.3552527156068805425093160010874271392821435889629618514439e-20,
        6.7762635780344027125465800054371356964110290955787023143048e-21,
        3.3881317890172013562732900027185678482055534416348377892881e-21,
        1.6940658945086006781366450013592839241027815825481047236610e-21,
        8.4703294725430033906832250067964196205139139899038809045762e-22,
        4.2351647362715016953416125033982098102569577545973601130720e-22,
        2.1175823681357508476708062516991049051284789722543575141340e-22,
        1.0587911840678754238354031258495524525642394979966384392667e-22,
        5.2939559203393771191770156292477622628211975048200167990834e-23,
        2.6469779601696885595885078146238811314105987542646114748854e-23,
        1.3234889800848442797942539073119405657052993773641311218606e-23,
        6.6174449004242213989712695365597028285264968871104373398258e-24,
        3.3087224502121106994856347682798514142632484435914413862282e-24,
        1.6543612251060553497428173841399257071316242218002485326535e-24,
        8.2718061255302767487140869206996285356581211090069024626919e-25,
        4.1359030627651383743570434603498142678290605545041587062739e-25,
        2.0679515313825691871785217301749071339145302772521677875029e-25,
        1.0339757656912845935892608650874535669572651386260949480472e-25,
        5.1698788284564229679463043254372678347863256931304885581059e-26,
        2.5849394142282114839731521627186339173931628465652460062866e-26,
        1.2924697071141057419865760813593169586965814232826232190475e-26,
        6.4623485355705287099328804067965847934829071164131163651180e-27,
        3.2311742677852643549664402033982923967414535582065582162940e-27,
        1.6155871338926321774832201016991461983707267791032791123639e-27,
        8.0779356694631608874161005084957309918536338955163955670906e-28,
        4.0389678347315804437080502542478654959268169477581977842041e-28,
        2.0194839173657902218540251271239327479634084738790988921844e-28,
        1.0097419586828951109270125635619663739817042369395494461025e-28,
        5.0487097934144755546350628178098318699085211846977472305254e-29,
        2.5243548967072377773175314089049159349542605923488736152643e-29,
        1.2621774483536188886587657044524579674771302961744368076323e-29,
        6.3108872417680944432938285222622898373856514808721840381621e-30,
        3.1554436208840472216469142611311449186928257404360920190811e-30,
        1.5777218104420236108234571305655724593464128702180460095405e-30,
        7.8886090522101180541172856528278622967320643510902300477027e-31,
        3.9443045261050590270586428264139311483660321755451150238513e-31,
        1.9721522630525295135293214132069655741830160877725575119256e-31,
        9.8607613152626475676466070660348278709150804388627875596284e-32,
        4.9303806576313237838233035330174139354575402194313937798142e-32,
        2.4651903288156618919116517665087069677287701097156968899071e-32,
        1.2325951644078309459558258832543534838643850548578484449535e-32,
        6.1629758220391547297791294162717674193219252742892422247678e-33,
        3.0814879110195773648895647081358837096609626371446211123839e-33,
        1.5407439555097886824447823540679418548304813185723105561919e-33,
        7.7037197775489434122239117703397092741524065928615527809597e-34,
        3.8518598887744717061119558851698546370762032964307763904798e-34,
        1.9259299443872358530559779425849273185381016482153881952399e-34,
        9.6296497219361792652798897129246365926905082410769409761996e-35,
        4.8148248609680896326399448564623182963452541205384704880998e-35,
        2.4074124304840448163199724282311591481726270602692352440499e-35,
        1.2037062152420224081599862141155795740863135301346176220249e-35,
        6.0185310762101120407999310705778978704315676506730881101248e-36,
        3.0092655381050560203999655352889489352157838253365440550624e-36,
        1.5046327690525280101999827676444744676078919126682720275312e-36,
        7.5231638452626400509999138382223723380394595633413601376560e-37,
        3.7615819226313200254999569191111861690197297816706800688280e-37,
        1.8807909613156600127499784595555930845098648908353400344140e-37,
        9.4039548065783000637498922977779654225493244541767001720700e-38,
        4.7019774032891500318749461488889827112746622270883500860350e-38,
        2.3509887016445750159374730744444913556373311135441750430175e-38,
        1.1754943508222875079687365372222456778186655567720875215087e-38,
        5.8774717541114375398436826861112283890933277838604376075437e-39,
        2.9387358770557187699218413430556141945466638919302188037718e-39
    );
    println!("\nDegs\n");
    fixed_degs!(
        45,
        26.565051177077989351572193720453294671204214299645221027986016315,
        14.036243467926478582892320159163424320974431380581266298337058401,
        7.1250163489017975619533008412068447490521492162607238276426051825,
        3.5763343749973510306847789144588206631245655696001124835578469130,
        1.7899106082460693071502497760790947201563917883235054021176935514,
        0.8951737102110743136412168230795324136084114495696665399341439766,
        0.4476141708605530730943538254238224827091342930735031642144448653,
        0.2238105003685380751235335424305929916708780424253282431476805738,
        0.1119056770662068872754757970347249887591093547160614847724120772,
        0.0559528918938036681744241344042319396884013356978716553412674416,
        0.0279764526170036745991791192368297381875414426076078902541342991,
        0.0139882271422650146286876357243594848298660091990353787934616279,
        0.0069941136753529184575248932878160283343861475049705016733480307,
        0.0034970568507040110584427735407656015909635980695714649620615038,
        0.0017485284269804495215808873441776280947931377845065452560413108,
        0.0008742642136937802602619268642724859200244719138776199097495540,
        0.0004371321068723345675782283818334703343284889449144821632141159,
        0.0002185660534393478384704388580877322471522753680112443607401864,
        0.0001092830267200714885703980295795817539168115694945862018620715,
        0.0000546415133600854404520967466423597535040536719949170281191834,
        0.0000273207566800489322469106025148011246613334113199937498604981,
        0.0000136603783400252426260630803038547851435055721688534717070512,
        6.8301891700127183758575125451482818866210688476309442815891e-6,
        3.4150945850063713207820028221146930908961138042116041268349e-6,
        1.7075472925031871769976572297620387196220999352875694932457e-6,
        8.5377364625159377807466059221948473019923802590922162826151e-7,
        4.2688682312579691273430929327706237541740604148979293935855e-7,
        2.1344341156289845932927702128444655896777838435115035995451e-7,
        1.0672170578144923003490380747296271245281586215883860020318e-7,
        5.3360852890724615063735065840323785708821960125217294354934e-8,
        2.6680426445362307537652928183142196551003302296392461154466e-8,
        1.3340213222681153769549638499443636237928521696264803096947e-8,
        6.6701066113405768848652160507058853642786456125423979813383e-9,
        3.3350533056702884424439076254759510878039654626318680718991e-9,
        1.6675266528351442212233662627533515946100738308863120313258e-9,
        8.3376332641757211061185968762859780364354863937461871384193e-10,
        4.1688166320878605530595191334578915261408829569390361446699e-10,
        2.0844083160439302765297871536433085765608339517637488381030e-10,
        1.0422041580219651382648970251859496399667160351463403880173e-10,
        5.2110207901098256913244894363851173894414539998443741273082e-11,
        2.6055103950549128456622452569994798434217112279372738909947e-11,
        1.3027551975274564228311226958506050652984786424705541365380e-11,
        6.5137759876372821141556135634416067559769219979801769644980e-12,
        3.2568879938186410570778067922443760566740270971935145735065e-12,
        1.6284439969093205285389033974376346131727093108721855577239e-12,
        8.1422199845466026426945169888324812969081662572052131303215e-13,
        4.0711099922733013213472584946217791773346605914581422329668e-13,
        2.0355549961366506606736292473365819047774024785860130749621e-13,
        1.0177774980683253303368146236715024919024602621501242822909e-13,
        5.0888874903416266516840731183615268839045000893220185924674e-14,
        2.5444437451708133258420365591812652450012748919824339438602e-14,
        1.2722218725854066629210182795906953478817655519063950528834e-14,
        6.3611093629270333146050913979535551461352378919259478656088e-15,
        3.1805546814635166573025456989767873739084202125122205079534e-15,
        1.5902773407317583286512728494883949120593102645747660758703e-15,
        7.9513867036587916432563642474419760916779265207721501567186e-16,
        3.9756933518293958216281821237209882372616351601233650505301e-16,
        1.9878466759146979108140910618604941425586515675288437717864e-16,
        9.9392333795734895540704553093024707427030503219781704170839e-17,
        4.9696166897867447770352276546512353750902492215308291533109e-17,
        2.4848083448933723885176138273256176880124651183331325697515e-17,
        1.2424041724466861942588069136628088440646501226125310340128e-17,
        6.2120208622334309712940345683140442203962725673701111064853e-18,
        3.1060104311167154856470172841570221102072640279734875452953e-18,
        1.5530052155583577428235086420785110551047729820227977716542e-18,
        7.7650260777917887141175432103925552755252911201590563570294e-19,
        3.8825130388958943570587716051962776377628238363351616158595e-19,
        1.9412565194479471785293858025981388188814342026995349875978e-19,
        9.7062825972397358926469290129906940944071988691626176625743e-20,
        4.8531412986198679463234645064953470472036029165394266718603e-20,
        2.4265706493099339731617322532476735236018018935144780660018e-20,
        1.2132853246549669865808661266238367618009010011628346242598e-20,
        6.0664266232748349329043306331191838090045050738211676103729e-21,
        3.0332133116374174664521653165595919045022525454114581163207e-21,
        1.5166066558187087332260826582797959522511262737683383470521e-21,
        7.5830332790935436661304132913989797612556313701699533463753e-22,
        3.7915166395467718330652066456994898806278156852510093745770e-22,
        1.8957583197733859165326033228497449403139078426462587749621e-22,
        9.4787915988669295826630166142487247015695392132572364844029e-23,
        4.7393957994334647913315083071243623507847696066318610684005e-23,
        2.3696978997167323956657541535621811753923848033163358874751e-23,
        1.1848489498583661978328770767810905876961924016582186128969e-23,
        5.9242447492918309891643853839054529384809620082911564009338e-24,
        2.9621223746459154945821926919527264692404810041455861175230e-24,
        1.4810611873229577472910963459763632346202405020727940483935e-24,
        7.4053059366147887364554817298818161731012025103639714790077e-25,
        3.7026529683073943682277408649409080865506012551819858941338e-25,
        1.8513264841536971841138704324704540432753006275909929663956e-25,
        9.2566324207684859205693521623522702163765031379549648561393e-26,
        4.6283162103842429602846760811761351081882515689774824310898e-26,
        2.3141581051921214801423380405880675540941257844887412159224e-26,
        1.1570790525960607400711690202940337770470628922443706080084e-26,
        5.7853952629803037003558451014701688852353144612218530401009e-27,
        2.8926976314901518501779225507350844426176572306109265200578e-27,
        1.4463488157450759250889612753675422213088286153054632600298e-27,
        7.2317440787253796254448063768377111065441430765273163001504e-28,
        3.6158720393626898127224031884188555532720715382636581500753e-28,
        1.8079360196813449063612015942094277766360357691318290750376e-28,
        9.0396800984067245318060079710471388831801788456591453751885e-29,
        4.5198400492033622659030039855235694415900894228295726875942e-29,
        2.2599200246016811329515019927617847207950447114147863437971e-29,
        1.1299600123008405664757509963808923603975223557073931718985e-29,
        5.6498000615042028323787549819044618019876117785369658594928e-30,
        2.8249000307521014161893774909522309009938058892684829297464e-30,
        1.4124500153760507080946887454761154504969029446342414648732e-30,
        7.0622500768802535404734437273805772524845147231712073243660e-31,
        3.5311250384401267702367218636902886262422573615856036621830e-31,
        1.7655625192200633851183609318451443131211286807928018310915e-31,
        8.8278125961003169255918046592257215656056434039640091554575e-32,
        4.4139062980501584627959023296128607828028217019820045777287e-32,
        2.2069531490250792313979511648064303914014108509910022888643e-32,
        1.1034765745125396156989755824032151957007054254955011444321e-32,
        5.5173828725626980784948779120160759785035271274775057221609e-33,
        2.7586914362813490392474389560080379892517635637387528610804e-33,
        1.3793457181406745196237194780040189946258817818693764305402e-33,
        6.8967285907033725981185973900200949731294089093468821527012e-34,
        3.4483642953516862990592986950100474865647044546734410763506e-34,
        1.7241821476758431495296493475050237432823522273367205381753e-34,
        8.6209107383792157476482467375251187164117611366836026908765e-35,
        4.3104553691896078738241233687625593582058805683418013454382e-35,
        2.1552276845948039369120616843812796791029402841709006727191e-35,
        1.0776138422974019684560308421906398395514701420854503363595e-35,
        5.3880692114870098422801542109531991977573507104272516817978e-36,
        2.6940346057435049211400771054765995988786753552136258408989e-36,
        1.3470173028717524605700385527382997994393376776068129204494e-36,
        6.7350865143587623028501927636914989971966883880340646022472e-37,
        3.3675432571793811514250963818457494985983441940170323011236e-37,
        1.6837716285896905757125481909228747492991720970085161505618e-37
    );
}
